function init(){localStorage&&(structure(),AddScript("js/modernizr-min.js"),AddScript("js/materialize-min.js"),$(window).load(function(){route(null!=localStorage.getItem("state")&&""!=localStorage.getItem("state")?localStorage.getItem("state"):tern(ref.getAuth(),"events","events")),$(".button-collapse").sideNav(),$(".collapsible").collapsible({accordian:!0})}))}function structure(){source=$("#nav_template").html(),template=Handlebars.compile(source),ref=new Firebase("https://shindigevents.firebaseio.com"),Handlebars.registerPartial("loginPartial",template),context=tern(ref.getAuth(),{login_option_routing:'route("events")',login_option_function:"logout()",login_option_text:"Logout"},{login_option_routing:'route("landing_page")',login_option_function:'route("register")',login_option_text:"Login or Register"}),html=template(context),$("body").append(html),source=$("#main_template").html(),template=Handlebars.compile(source),context={},html=template(context),$("body").append(html)}function checkLogin(){ref.getAuth()&&location.reload()}function tern(e,t,n){var o=e?t:n;return o}function logout(){ref.unauth(),route("landing_page"),location.reload()}function register_template(){$.getScript("js/auth/register.js").then(function(){ref=new Firebase("https://shindigevents.firebaseio.com");var e=ref.getAuth();e?($("#template_container").html(""),$("#template_container").hide(0),source=$("#register").html(),template=Handlebars.compile(source),localStorage.setItem("state","register"),html=template(context),$("#template_container").append(html),$("#template_container").show(500)):route("manual_registration")})}function manual_registration(){var e=$.getScript("https://cdn.firebase.com/js/client/2.2.1/firebase.js");e.then(function(){AddScript("js/auth/register.js")},function(e){console.log(e)});var t=$.getScript("https://code.jquery.com/ui/1.12.0-rc.2/jquery-ui.min.js");t.then(function(){AddScript("js/auth/register_email.js")},function(e){console.log(e)})}function AddScript(e){var t=document.createElement("script");t.type="text/javascript",t.src=e,document.body.appendChild(t),document.body.removeChild(document.body.lastChild)}function events(){}function new_event_form(){}function route(e){switch($("#template_container").html(""),$("#template_container").hide(0),source=$("#"+e).html(),template=Handlebars.compile(source),localStorage.setItem("state",e),e){case"events":events(),$("#template_container").show(500);break;case"manual_registration":manual_registration(),$("#template_container").show(500);break;case"register":register_template(),$("#template_container").show(500);break;case"landing_page":context={image:"images/group_003.jpg"},$("#template_container").show(500);break;case"structure":$("#template_container").show(500);break;case"new_event_form":new_event_form(),$("#template_container").show(500);break;default:context={}}html=template(context),$("#template_container").append(html),$("#template_container").show(500)}var view,source,template,context,html,ref;$(function(){var e=$.getScript("https://cdn.firebase.com/js/client/2.2.1/firebase.js");e.then(function(){ref=new Firebase("https://shindigevents.firebaseio.com"),init()},function(e){console.log(e)})});